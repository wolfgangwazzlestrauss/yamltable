[flake8]
application-import-names = yamltable
docstring-convention = google
ignore =
    D202
    E203
    W503
import-order-style = google
max-complexity = 10
max-line-length = 80
per-file-ignores =
    scripts/*:B008
    **/__main__.py:B008

[pytest]
addopts = -sv --benchmark-autosave --doctest-modules
doctest_optionflags =
    IGNORE_EXCEPTION_DETAIL
    NORMALIZE_WHITESPACE
    NUMBER
python_classes = Test*
python_files = __init__.py test_*.py
python_functions = test_*
testpaths = 
    src
    tests

[testenv]
commands =
    poetry install -v
    poetry run pytest --doctest-modules src
    poetry run pytest --cov
deps = poetry
description = Test Python code.

[testenv:static]
commands =
    poetry install -v
    poetry run bandit -ilr src/
    poetry run black --check .
    poetry run flake8 scripts/ src/ tests/
    poetry run mypy scripts/ src/ tests/
    poetry run python scripts/docs.py build
deps = poetry
description = Run static analyzers on Python code.

[tox]
envlist = static, py36, py37, py38
isolated_build = true

[tox:.package]
basepython = python3.8
